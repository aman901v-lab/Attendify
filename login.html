<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Smart Attendance</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="login-container">
    <h2>Welcome Back</h2>

    <!-- Social Login Buttons -->
    <button onclick="socialLogin('google')">Login with Google</button>
    <button onclick="socialLogin('facebook')">Login with Facebook</button>
    <button onclick="socialLogin('apple')">Login with Apple</button>
    <button onclick="socialLogin('phone')">Login with Phone</button>
    <button onclick="socialLogin('email')">Login with Email</button>

    <hr style="margin:20px 0; border:0; border-top:1px solid rgba(255,255,255,0.3);">

    <!-- Username Password Login -->
    <input type="text" id="username" placeholder="Enter Username">
    <input type="password" id="password" placeholder="Enter Password">
    <button onclick="usernameLogin()">Login</button>

    <p id="login-error" style="display:none; color:red;">Invalid username or password!</p>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js"></script>
  <script src="firebase-config.js"></script>

  <script>
    const auth = firebase.auth();

    // ðŸ”¹ Social Login Handler
    function socialLogin(providerName) {
      let provider;
      switch(providerName) {
        case "google":
          provider = new firebase.auth.GoogleAuthProvider();
          break;
        case "facebook":
          provider = new firebase.auth.FacebookAuthProvider();
          break;
        case "apple":
          provider = new firebase.auth.OAuthProvider("apple.com");
          break;
        case "phone":
          alert("Phone login coming soon ðŸš€");
          return;
        case "email":
          alert("Email login coming soon ðŸš€");
          return;
      }

      auth.signInWithPopup(provider)
        .then(result => {
          localStorage.setItem("loggedIn", "true");
          localStorage.setItem("username", result.user.displayName || "User");
          window.location.href = "profile-setup.html"; // pehle profile setup
        })
        .catch(err => {
          console.error("Login Failed:", err.message);
          alert("Login failed: " + err.message);
        });
    }

    // ðŸ”¹ Username/Password Login (Manual)
    function usernameLogin() {
      const user = document.getElementById("username").value.trim();
      const pass = document.getElementById("password").value.trim();

      if(user === "aman901v-lab" && pass === "12345") {
        localStorage.setItem("loggedIn", "true");
        localStorage.setItem("username", user);
        window.location.href = "index.html";
      } else {
        document.getElementById("login-error").style.display = "block";
      }
    }
  </script>
</body>
</html>
